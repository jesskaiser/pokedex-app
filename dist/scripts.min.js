let pokemonRepository=function(){l();let t=[];function e(e){"object"==typeof e&&"name"in e&&"detailsUrl"in e&&t.push(e)}function i(t){n(t)}let a=document.querySelector("#exampleModal");function n(t){let e=$(".modal-title"),i=$(".modal-body"),a=$(".modal-header"),n=$(".modal-footer");e.empty(),i.empty(),n.empty(),a.attr("class","modal-header row"),e.attr("id","title"),e.attr("class","modal-title col");let o=t.name.charAt(0).toUpperCase()+t.name.slice(1),s=$('<div class="col-6 align-self-center"></div>'),l=$(`<p><span class="text-style">Height</span>: ${t.height}</p>`),r=$(`<p><span class="text-style">Weight</span>: ${t.weight}</p>`),d=$(`<p><span class="text-style">Type(s)</span>: ${t.types[0].type.name}</p>`);t.types[1]&&d.append(`, ${t.types[1].type.name}`);let c=$(`<p><span class="text-style">Abilities</span>: ${t.abilities[0].ability.name}</p>`);t.abilities[1]&&c.append(`, ${t.abilities[1].ability.name}`),i.attr("class","modal-body justify-content-between align-items-center row");let p=$("<img>",{class:"img-fluid modal-img col",src:t.imageUrlFront,alt:"front view of "+o}),m=$("<img>",{class:"img-fluid modal-img col hidden",src:t.imageUrlBack,alt:"rear view of "+o}),u=$("<button />",{type:"button",id:"flip",class:"btn btn-secondary footer-button col",text:"Flip "+o});u.attr("aria-label","Flip pokemon image");let f=$("<button />",{type:"button",class:"btn btn-close btn-secondary footer-button col",text:"Close"});f.attr("aria-label","Close"),f.attr("data-dismiss","modal"),n.attr("class","modal-footer row"),a.append(e.append(o)),i.append(p,m,s.append(l,r,d,c)),n.append(u,f),$("#exampleModal").on("click","#flip",function(){p.toggleClass("hidden"),m.toggleClass("hidden")})}function o(){a.classList.remove("is-visible")}function s(){return t}function l(){document.querySelector(".loading-message").classList.remove("hidden")}function r(){document.querySelector(".loading-message").classList.add("hidden")}return window.addEventListener("keydown",t=>{"Escape"===t.key&&a.classList.contains("is-visible")&&o()}),a.addEventListener("click",t=>{t.target===a&&o()}),$("#search-input").on("input",function(){let t=$("#search-input").val().toLowerCase();findPokemon(t)}),{add:e,addListItem:function t(e){pokemonRepository.loadDetails(e).then(function(){let t=document.querySelector(".list-group"),i=document.createElement("div"),a=document.createElement("li");a.classList.add("d-flex","flex-column-reverse","justify-center","list-group-item"),a.setAttribute("id",`${e.name}`);let o=document.createElement("button");o.setAttribute("type","button"),o.setAttribute("data-toggle","modal"),o.setAttribute("data-target","#exampleModal"),o.classList.add("btn","btn-pokemon");let s=document.createElement("img");s.setAttribute("src",e.imageUrlFront),s.setAttribute("alt",`image of ${e.name}`),s.setAttribute("class","pokemon-image"),o.addEventListener("click",function(){var t,i;t=e,i=t,n(i)}),o.innerText=e.name.charAt(0).toUpperCase()+e.name.slice(1),i.appendChild(a),a.appendChild(s),a.appendChild(o),r(),t.appendChild(i)})},displayPokemon:function t(e){var i;i=e,n(i)},showDetails:i,showModal:n,hideModal:o,getAll:s,loadList:function t(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(t){return t.json()}).then(function(t){t.results.forEach(function(t){e({name:t.name,detailsUrl:t.url})})}).catch(function(t){console.error(t)})},loadDetails:function t(e){return fetch(e.detailsUrl).then(function(t){return t.json()}).then(function(t){e.imageUrlFront=t.sprites.front_default,e.imageUrlBack=t.sprites.back_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.abilities=t.abilities}).catch(function(t){console.error(t)})},showLoadingMessage:l,hideLoadingMessage:r}}(),findPokemon=function(t){t=t.toLowerCase(),$(".list-group-item button").filter(function(){$(this).closest("div").toggle($(this).text().toLowerCase().indexOf(t)>-1)})};pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});